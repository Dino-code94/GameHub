{% extends 'base.html' %}
{% block content %}

<!-- Main wrapper that keeps detail page centered nicely -->
<div class="game-detail-wrapper">

    <!-- Top row = left side: cover image + right side: description -->
    <div class="detail-wrapper">

        <!-- Game cover image -->
        <div class="detail-image">
            <img src="{{ game.cover.url }}" alt="{{ game.title }}">
        </div>

        <!-- Game title + text -->
        <div class="detail-info">
            <h1>{{ game.title }}</h1>
            <p class="desc">{{ game.description }}</p>
        </div>

    </div>

    <!-- thin separator line -->
    <hr style="border-color:#444;">

    <!-- comments headline -->
    <h2>Comments</h2>

    <!-- display each comment -->
    <div class="comment-section">
        {% for c in comments %}
        <!-- Single comment box -->
        <div class="comment-box">
            <strong>{{ c.user.username }}:</strong> {{ c.text }}
        </div>
        {% empty %}
        <p>No comments yet.</p>
        {% endfor %}
    </div>

    <!-- show comment textarea only if user is logged in -->
    {% if user.is_authenticated %}
    <form method="POST">
        {% csrf_token %}
        <!-- comment input -->
        <textarea name="text" rows="3" placeholder="Write a comment..." class="comment-textarea"></textarea>
        <br>
        <!-- submit button -->
        <button type="submit" class="comment-btn">Add comment</button>
    </form>
    {% else %}
    <!-- guest cannot comment -->
    <p>You must login to comment.</p>
    {% endif %}

</div><!-- END page wrapper -->

{% endblock %}
